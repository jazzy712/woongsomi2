{% extends "base.html" %}
{% block content %}

<style>
  .profile-container {
    padding: 2rem;
    font-family: 'Segoe UI', sans-serif;
    animation: fadein 0.8s ease-in-out;
  }

  .section-card {
    background: #f0f8ff;
    border-radius: 16px;
    padding: 1.5rem;
    margin: 1.2rem 0;
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.08);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .section-card:hover {
    transform: scale(1.02);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.12);
  }

  .follow-btn {
    background: #D9EAFD;
    border: none;
    border-radius: 50%;
    padding: 10px 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .follow-btn:hover {
    transform: scale(1.2);
  }

  .fade-hover a {
    transition: color 0.2s ease, font-weight 0.2s ease;
  }

  .fade-hover a:hover {
    color: #2575fc;
    font-weight: bold;
  }

  @keyframes fadein {
    from {opacity: 0; transform: translateY(20px);}
    to {opacity: 1; transform: translateY(0);}
  }
</style>

<div class="profile-container">

  <!-- í”„ë¡œí•„ ìƒë‹¨ -->
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
    <h1 style="font-weight: bold; color: #2c3e50;">
      {% if request.user != person %}
        {{ person.username }}ë‹˜ì˜ í”„ë¡œí•„ í˜ì´ì§€
      {% else %}
        ë‚˜ì˜ í”„ë¡œí•„ í˜ì´ì§€
      {% endif %}
    </h1>

    {% if person.profile_image %}
      <img src="{{ person.profile_image.url }}" class="rounded-circle" style="width: 100px; height: 100px;">
    {% endif %}


    {% if request.user == person %}
      <a href="{% url 'accounts:update' %}" class="btn btn-outline-secondary">í”„ë¡œí•„ ìˆ˜ì •</a>
    {% endif %}


    <div style="font-size: 1rem; color: #555;">
      íŒ”ë¡œì‰: <strong>{{ person.followings.count }}</strong> /
      íŒ”ë¡œì›Œ: <strong>{{ person.followers.count }}</strong>
    </div>
    
    {% if request.user != person %}
    <form action="{% url 'accounts:follow' person.pk %}" method="POST">
      {% csrf_token %}
      <button type="submit" class="follow-btn">
        {% if request.user in person.followers.all %}
          <i class="fas fa-heart" style="color: red; font-size: 1.5rem;"></i>
        {% else %}
          <i class="far fa-heart" style="color: black; font-size: 1.5rem;"></i>
        {% endif %}
      </button>
    </form>
    {% endif %}
    
    </div>
  </div>

  <!-- ê²Œì‹œê¸€ -->
  {% comment %} <div class="section-card fade-hover">
    <h2>ğŸ“Œ {% if request.user != person %}{{ person.username }}ë‹˜ì˜ ê²Œì‹œê¸€{% else %}ë‚´ ê²Œì‹œê¸€{% endif %}</h2>
    {% for board in person.board_set.all %}
      <p>
        ê¸€ì œëª©:
        <a href="{% url 'boards:detail' board.pk %}">{{ board.title }}</a>
        <span style="color: #aaa;">#{{ board.pk }}</span>
      </p>
    {% empty %}
      <p style="color: #888;">ì‘ì„±í•œ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endfor %}
  </div> {% endcomment %}
  <div class="section-card">
    <h2>ğŸ’¼ ê°€ì…í•œ ê¸ˆìœµ ìƒí’ˆ</h2>
    {% if person.joined_products %}
      <p>{{ person.joined_products }}</p>
    {% else %}
      <p style="color: #888;">ì•„ì§ ê°€ì…í•œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </div>
  <div class="section-card">
  <h2>ğŸ“Œ {% if request.user != person %}{{ person.username }}ë‹˜ì˜ ê²Œì‹œê¸€{% else %}ë‚´ ê²Œì‹œê¸€{% endif %}</h2>

  {% if person.board_set.all %}
    {% for board in person.board_set.all %}
      <div class="section-card" style="background: #fff; padding: 1rem; margin-top: 1rem;">
        <a href="{% url 'boards:detail' board.pk %}" style="text-decoration: none; color: #2c3e50;">
          <h4 style="margin-bottom: 0.4rem;">ğŸ“ {{ board.title }}</h4>
        </a>
        <div style="font-size: 14px; color: #555;">
          ğŸ“ ê¸€ ë²ˆí˜¸: #{{ board.pk }} /
          ğŸ“… ì‘ì„±ì¼: {{ board.created_at|date:"Y.m.d H:i" }} /
          ğŸ’¬ ëŒ“ê¸€: {{ board.comments.count }}
        </div>
      </div>
    {% endfor %}
  {% else %}
    <p style="color: #888;">ì‘ì„±í•œ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endif %}
</div>

  <!-- ëŒ“ê¸€ -->
  {% comment %} <div class="section-card">
    <h2>ğŸ’¬ {% if request.user != person %}{{ person.username }}ë‹˜ì˜ ëŒ“ê¸€{% else %}ë‚´ ëŒ“ê¸€{% endif %}</h2>
    {% for comment in person.comment_set.all %}
      <p style="margin-bottom: 0.8rem;">â€œ{{ comment.content }}â€</p>
    {% empty %}
      <p style="color: #888;">ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endfor %}
  </div> {% endcomment %}

  <div class="section-card">
  <h2>ğŸ’¬ {% if request.user != person %}{{ person.username }}ë‹˜ì˜ ëŒ“ê¸€{% else %}ë‚´ ëŒ“ê¸€{% endif %}</h2>

  {% if person.comment_set.all %}
    {% for comment in person.comment_set.all %}
      <div class="section-card" style="background: #fff; padding: 1rem; margin-top: 1rem;">
        <p style="margin-bottom: 0.5rem; color: #2c3e50;">
          ğŸ—¨ï¸ â€œ{{ comment.content }}â€
        </p>
        <div style="font-size: 13px; color: #777;">
          ğŸ“Œ ê²Œì‹œê¸€: 
          <a href="{% url 'boards:detail' comment.board.pk %}" style="color: #2575fc; text-decoration: none;">
            {{ comment.board.title }}
          </a>
          /
          ğŸ“… ì‘ì„±ì¼: {{ comment.created_at|date:"Y.m.d H:i" }}
        </div>
      </div>
    {% endfor %}
  {% else %}
    <p style="color: #888;">ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endif %}
</div>
  <!-- íŒ”ë¡œì›Œ -->
  <div class="section-card">
    <h2>ğŸ‘¥ Follower</h2>
    {% if person.followers.all %}
      {% for follower in person.followers.all %}
        <div class="section-card" style="background: #fff; padding: 1rem; margin-top: 1rem;">
          <a href="{% url 'accounts:profile' follower.pk %}" style="text-decoration: none; color: #2c3e50;">
            <h4 style="margin-bottom: 0.3rem;">ğŸ‘¤ {{ follower.username }}</h4>
          </a>
          <div style="font-size: 14px; color: #555;">
            ğŸ“ ê²Œì‹œê¸€: {{ follower.board_set.count }} /
            ğŸ¤ íŒ”ë¡œì‰: {{ follower.followings.count }} /
            ğŸ’¬ íŒ”ë¡œì›Œ: {{ follower.followers.count }}
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p style="color: #888;">Followerê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </div>

</div>

{% endblock content %}